<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:int="http://www.springframework.org/schema/integration"
	xmlns:int-ftp="http://www.springframework.org/schema/integration/ftp"
	xsi:schemaLocation="http://www.springframework.org/schema/integration/ftp http://www.springframework.org/schema/integration/ftp/spring-integration-ftp-3.0.xsd
		http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

	<!-- See also:
		http://static.springsource.org/spring-integration/reference/htmlsingle/#gateway-proxy
		http://www.eaipatterns.com/MessagingGateway.html -->
	<int:gateway id="gateway"
		default-request-timeout="5000"
		default-reply-timeout="5000"
		default-request-channel="requestChannel"
		default-reply-channel="replyChannel"
		service-interface="com.wmsi.sgx.service.StringConversionService">
		<int:method name="convertToUpperCase"/>
	</int:gateway>

	<!-- See also:
		http://static.springsource.org/spring-integration/reference/htmlsingle/#service-activator
		http://www.eaipatterns.com/MessagingAdapter.html -->
	<int:service-activator id="serviceActivator"
		input-channel="requestChannel" output-channel="replyChannel"
		expression="payload.toLowerCase()"/>

	<int:channel id="replyChannel"/>
	<int:channel id="requestChannel"/>


	<int:gateway id="indexGateway"
		default-request-timeout="5000"
		default-reply-timeout="5000"
		default-request-channel="indexRequestChannel"
		default-reply-channel="indexReplyChannel"
		service-interface="com.wmsi.sgx.service.indexer.IndexBuilderService">
		<int:method name="index"/>
	</int:gateway>

	<!-- See also:
		http://static.springsource.org/spring-integration/reference/htmlsingle/#service-activator
		http://www.eaipatterns.com/MessagingAdapter.html -->
	<int:service-activator id="serviceActivator"
		input-channel="indexRequestChannel" output-channel="indexReplyChannel" ref="indexBuilderServiceImpl"/>

	<int:channel id="indexRequestChannel"/>
	<int:channel id="indexReplyChannel"/>
	
	
	<bean id="ftpClientFactory"
    class="org.springframework.integration.ftp.session.DefaultFtpSessionFactory">
    <property name="host" value="localhost"/>
    <property name="port" value="22"/>
    <property name="username" value="kermit"/>
    <property name="password" value="frog"/>
    <property name="clientMode" value="0"/>
    <property name="fileType" value="2"/>
    <property name="bufferSize" value="100000"/>
</bean>

</beans>
